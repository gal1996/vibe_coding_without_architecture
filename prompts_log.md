# プロンプト記録ログ

## 概要
このファイルは、Vibe-Coding実験（グループ A: No-Arch）で投げられたすべてのプロンプトを時系列で記録します。

## 記録フォーマット
各プロンプトは以下の形式で記録されます：
- **タスクID**: TASK_XXX
- **日時**: YYYY-MM-DD HH:MM:SS
- **プロンプト内容**: 実際のプロンプトテキスト
- **開始時刻**: 作業開始時刻
- **完了時刻**: 作業完了時刻
- **実行時間**: T_exec（分）

---

## プロンプト履歴

### TASK_000: 実験環境準備
- **日時**: 2025-11-16 (初期セットアップ)
- **プロンプト内容**: 「依頼の目的：Vibe-Codingの有効性検証プロジェクト（実験記録準備）」
- **開始時刻**: -
- **完了時刻**: -
- **実行時間**: -
- **備考**: 実験記録ファイルの準備

---

---
Task_ID: TASK_001
Timestamp: 2025-11-16 12:37:06
---
# プロジェクト名: ECサイトバックエンドAPI実装

## 1. 概要
ユーザー、商品、および注文を管理するバックエンドAPIシステムを実装する。

## 2. エンティティ仕様
以下のデータ構造を定義し、システム内で使用する。

| エンティティ | 必須フィールド |
| :--- | :--- |
| **Product** (商品) | ID, 名前, 価格 (整数), 在庫数 (整数, 0以上), カテゴリ (文字列) |
| **User** (ユーザー) | ID, ユーザー名 (ユニーク), 認証情報（例：パスワードハッシュ）, 管理者フラグ (boolean) |
| **Order** (注文) | ID, ユーザーID, 注文明細 (商品IDと数量のリスト), 合計金額, ステータス |

## 3. 機能要件 (API)
以下の主要な機能を実現するためのAPIを実装すること。

1.  **商品管理:** 商品の作成、一覧表示、詳細表示の機能。
2.  **ユーザー管理:** ユーザーの登録、認証（ログイン）の機能。
3.  **注文処理:** ユーザーが商品を確定注文する機能。

## 4. ビジネスロジックと制約
特に以下の重要な制約とロジックを厳守すること。

1.  **アトミックな注文処理:** 注文の確定時、要求された商品について以下の処理を**同時に**実行すること。
    * 在庫チェック: 在庫が不足している場合は注文を拒否する。
    * 在庫削減: 注文が成功した場合、該当商品の在庫数を注文数分だけ正確に減少させること。
2.  **商品一覧のフィルタリング:** 商品一覧を取得する際、カテゴリ名に基づいてフィルタリングできること。
3.  **管理者認可:** 新規商品を作成する機能は、**管理者ユーザー**のみが実行できること。

---

## 5. 実験タスク

### タスク A: 最小実装
上記の仕様を満たすコードを、**最も迅速かつ少ないファイル数**で実装し、その結果のファイル構成とコードを提示してください。

### タスク B: アーキテクチャ分離実装
上記の仕様を満たすコードを、**クリーンアーキテクチャ**の原則に基づき、厳密なレイヤー分離を適用して実装し、その結果のファイル構成とコードを提示してください。
---

### TASK_MT1: 消費税と送料ロジックの実装
- **タスクID**: TASK_MT1
- **日時**: 2025-11-16 18:45:00
- **プロンプト内容**:
```
# MT-1 機能追加タスク：消費税と送料ロジックの実装

このタスクは、既存のECサイトバックエンドAPIに対する仕様変更（保守性検証）です。あなたは、初期実装されたコードベースに以下のロジックを追加する必要があります。

## 1. 共通の仕様変更内容

すべての注文処理に対し、以下のビジネスロジックを追加してください。

1.  **消費税 (10%) の適用:**
    * 注文の合計金額（`total_amount`）を計算する際、商品価格の合計（税抜）に一律で **10% の消費税**を加算すること。
2.  **送料無料条件の追加:**
    * 注文の合計金額（税抜）が **5,000円**以上の場合は送料を**無料**とし、5,000円未満の場合は一律 **500円**の送料を加算すること。
3.  **エンティティの更新:**
    * `Order` エンティティには、最終的な合計金額（送料・税込）を保持する既存のフィールドに加え、新たに **`shipping_fee`（送料額）**フィールドを追加すること。
```
- **開始時刻**: 18:45:00
- **完了時刻**: 19:00:00
- **実行時間**: 15分

---

<!-- 以下、新しいプロンプトが投げられるたびに追記されます -->